<%- include('../layout', { body: '' }) %>

<div class="row justify-content-center">
  <div class="col-lg-8">
    <div class="page-hero">
      <h1 class="page-hero-title">Bag</h1>
      <p class="page-hero-subtitle">Review your picks before you check out.</p>
    </div>

    <div class="card-nike">
      <% if (!cart.length) { %>
        <p>Your bag is empty.</p>
        <a class="btn btn-dark-nike btn-pill mt-2" href="/shop">Continue shopping</a>
      <% } else { %>
        <table class="table table-nike">
          <thead>
            <tr>
              <th>Product</th><th>Price</th><th>Qty</th><th>Total</th><th></th>
            </tr>
          </thead>
          <tbody>
            <% cart.forEach(item => { %>
              <tr>
                <td><strong><%= item.name %></strong></td>
                <td>$<%= item.unit_price %></td>
                <td><%= item.quantity %></td>
                <td>$<%= (item.unit_price * item.quantity).toFixed(2) %></td>
          <td>
            <form method="post" action="/shop/cart/remove" style="display:inline">
                    <input type="hidden" name="product_id" value="<%= item.product_id %>">
                    <button class="btn btn-sm btn-outline-nike">Remove</button>
                  </form>
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>

        <div class="d-flex justify-content-between align-items-center">
          <h4 class="mb-0">Total: $<%= total.toFixed(2) %></h4>
          <div>
            <a class="btn btn-outline-nike btn-pill" href="/shop">Continue shopping</a>
            <a class="btn btn-dark-nike btn-pill ms-2" href="/shop/checkout">Checkout</a>
          </div>
        </div>
      <% } %>
    </div>
  </div>
</div>
